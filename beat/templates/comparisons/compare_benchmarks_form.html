{% extends "base_site.html" %}
{% block title %}Compare Benchmarks{% endblock %}
{% block content %}

		<h2>Models</h2>
		<form action="{% url comparisons.views.compare_scatterplot %}" method="post">{% csrf_token %}
			<table class="compare_form">
				<tr class="form_a">
					<th><label for="id_name">{{ form.name.label_tag }}</label></th>
					<td colspan="2">{{ form.name }}</td>
				</tr>
				
				<tr class="form_a">
					<td colspan="3" class="titlecell">SELECT SET A</td>
				</tr>

				<tr class="form_a">
					<th><label for="id_a_algo">{{ form.a_algo.label_tag }}</label></th>
					<td>{{ form.a_algo }}</td>
					<td rowspan="4" class="optioncell">{{ form.a_options.label_tag }}<br />{{ form.a_options }}</td>
				</tr>
				<tr class="form_a">
					<th><label for="id_a_tool">{{ form.a_tool.label_tag }}</label></th>
					<td>{{ form.a_tool }}</td>
				</tr>
				<tr class="form_a">
					<th><label for="id_a_version">{{ form.a_version.label_tag }}</label></th>
					<td>{{ form.a_version }}</td>
				</tr>
				<tr class="form_a">
					<th><label for="id_a_algorithmtool">{{ form.a_algorithmtool.label_tag }}</label></th>
					<td>{{ form.a_algorithmtool }}</td>
				</tr>
							

				<tr><td colspan="3" class="titlecell">SELECT SET B</td></tr>

				<tr class="form_b">
					<th><label for="id_b_algo">{{ form.b_algo.label_tag }}</label></th>
					<td>{{ form.b_algo }}</td>
					<td rowspan="4" class="optioncell">{{ form.b_options.label_tag }}<br />{{ form.a_options }}</td>
				</tr>
				<tr class="form_b">
					<th><label for="id_b_tool">{{ form.b_tool.label_tag }}</label></th>
					<td>{{ form.b_tool }}</td>
				</tr>
				<tr class="form_b">
					<th><label for="id_b_version">{{ form.b_version.label_tag }}</label></th>
					<td>{{ form.b_version }}</td>
				</tr>
				<tr class="form_b">
					<th><label for="id_b_algorithmtool">{{ form.b_algorithmtool.label_tag }}</label></th>
					<td>{{ form.b_algorithmtool }}</td>
				</tr>

			</table>
			<input type="submit" value="Submit" />
		</form>
		<script type="text/javascript">
		var target_url = "{% url comparisons.views.compareform %}";
		
		$(".form_a option").click(function(src){
			benchmark_form_update('.form_a', src);			
		});
		$(".form_b option").click(function(src){
			benchmark_form_update('.form_b', src);			
		});
		
		
		
		var benchmark_form_update = function(form, src){
			var res = {};
			
			$(form + " select").each(function(index, value){ 
				res[value.id] = $(value).children(":selected");
				res[value.id] = $.map(res[value.id], function(n, i){
					return $(n).text();
				});
			});
			
			$.post(target_url, res,
				function(data){
					console.log(data);
				}
			);
		}		
		</script>
{% endblock %}